<!DOCTYPE html><html><head><meta charset="UTF-8"><title></title></head><body></body><script>    document.domain = 'huanqiu.com';    var canAccess = true;    //COOKIE    //读取    function cookieGet(name){        var cookieName = encodeURIComponent(name) + "=";        var cookieStart = document.cookie.indexOf(cookieName);        var cookieValue = null;        if (cookieStart > -1) {            var cookieEnd = document.cookie.indexOf(";", cookieStart); //从cookieStart开始检索字符串";"            if (cookieEnd == -1) {//没有检索到                cookieEnd = document.cookie.length;            }            cookieValue = decodeURIComponent(document.cookie.substring(cookieStart + cookieName.length, cookieEnd));        }        return cookieValue;    }    //设置    function cookieSet(name, value, expires, path, domain, secure){        //键名,键值,保存时间,路径,域,失效日期        var cookieText = encodeURIComponent(name) + "=" + encodeURIComponent(value);        if (expires instanceof Date) {            cookieText += "; expires=" + expires.toGMTString();        }        if (path) {            cookieText += "; path=" + path;        }        if (domain) {            cookieText += "; domain=" + domain;        }        if (secure) {            cookieText += "; secure";        }        document.cookie = cookieText;    }    //删除    function cookieDel(name, path, domain, secure){        cookieSet(name, "", new Date(0), path, domain, secure);    }    //AJAX    function Request(url,status){        //post & get        this.method = status.method || "get";        //超时时间        this.maxTime = status.maxTime || 6000;        //是否缓存        this.useCache = status.useCache || false;        //同步 & 异步(默认)        this.async = status.async || true;        //参数        this.data = status.data || null;        //ajax地址        this.url = url || "";        //唯一识别码。        if(!this.useCache){            var uid = new Date().valueOf();            var requestId = "&_" + (++uid).toString(36);            this.data = status.data + requestId;        }        this.xhr = null;        if(window.XMLHttpRequest){            this.xhr = new XMLHttpRequest();        }else if(window.ActiveXObject){            this.xhr = new ActiveXObject("Microsoft.XMLHTTP");        }    }    Request.prototype = {        on : function(listener){            var timer = undefined;            var xhr = this.xhr;            var maxTime = this.maxTime;            //初始化请求            if(this.method === "get"){                xhr.open(this.method, this.url + "?" + this.data, this.async);            }else{                xhr.open(this.method, this.url, this.async);                xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");                xhr.setRequestHeader("If-Modified-Since", "0");            }            if(xhr != null){                xhr.onreadystatechange = function(){                    if(xhr.readyState === 4){                        if(xhr.status === 0 || xhr.status === 200){                            listener(xhr.responseText);                        }else{                            listener(xhr.status);                        }                        //解除超时                        if(timer){                            clearTimeout(timer);                            timer = undefined;                        }                    }                };                //发送请求                if(this.method === "get"){                    xhr.send();                }else{                    xhr.send(this.data);                }                //超时                timer = setTimeout(function(){                    xhr.abort();                    clearTimeout(timer);                    timer = undefined;                },maxTime);            }        }    };    //发帖    function addNewTieFun(data,element,bs,qs,type){        var http_dataPedal = ('https:' == document.location.protocol ? false : true) ? "http://" : "https://";        var addNewTie = new Request(http_dataPedal + "commentn.huanqiu.com/api/v2",{            maxTime : 10000,            useCache : false,            method : "post",            data : data        });        addNewTie.on(function(e){            var json = eval("(" + e + ")");            if(json.code){                window.parent.TIE.addNewTieHD(json,element,bs,qs,type);            }        });    }</script></html>